# Host checks

define command {
	command_name		check-host-alive
	command_line		$USER1$/check_ping -H $HOSTADDRESS$ -w 3000.0,80% -c 5000.0,100% -p 1
}

# Service checks

define command {
	command_name		check_file_age
	command_line  	$USER1$/check_by_ssh -H $HOSTADDRESS$ -C "/usr/local/bin/check_file -i -p $ARG1$ -w $ARG2$ -c $ARG3$" -l root
}

define command {
	command_name		check_file_count
	command_line  	$USER1$/check_by_ssh -H $HOSTADDRESS$ -C "/u/nagios/checks/file_queues.rb -t count -p $ARG1$ -w $ARG2$ -c $ARG3$" -l app
}

define command {
	command_name		check_log
	command_line  	$USER1$/check_by_ssh -H $HOSTADDRESS$ -C "/usr/lib64/nagios/plugins/check_log -F $ARG1$ -O /tmp/nagios.logcheck.processed -q $ARG2$" -l root
}

define command {
	command_name		check_mysqlrep
	command_line		$USER3$/check-mysql-slave.pl --host $HOSTADDRESS$ --port $ARG1$ --user replcheck --password $ARG2$ --warn $ARG3$ --crit $ARG4$
}

define command { 
	command_name    check_solr
	command_line    $USER3$/check_solr.rb -c 10 -h $HOSTADDRESS$ -r 10 -p $ARG1$
	
}

define command { 
	command_name    query_solr
	command_line    $USER3$/check_solr.rb -c 10 -h $HOSTADDRESS$ -r 10 -p $ARG1$ -q $ARG2$
	
}

define command { 
	command_name    check_mem
	command_line    $USER1$/check_by_ssh -H $HOSTADDRESS$ -c check_mem -t 20
} 

# Notification


define command {
	command_name	host-notify-by-email
	command_line	/usr/bin/printf "%b" "$LONGDATETIME$\n\n$HOSTALIAS$ $NOTIFICATIONTYPE$ $HOSTSTATE$\n\n$HOSTOUTPUT$\n\nLogin: ssh://$HOSTNAME$" | /bin/mail -s "$NOTIFICATIONTYPE$ - $HOSTALIAS$ $HOSTSTATE$!" $CONTACTEMAIL$
}


define command{
	command_name	host-notify-by-campfire
	command_line	/usr/local/nagios/bin/campfire -r "<%= @node[:base][:monitoring_campfire_room] %>" -S -l <%= @node[:base][:campfire_email] %> -p <%= @node[:base][:campfire_password] %> -m "$HOSTALIAS$ (ssh://$HOSTNAME$) $HOSTSTATE$ $NOTIFICATIONTYPE$ $HOSTSTATE$ $HOSTOUTPUT$"

}

define command{
	command_name	host-notify-by-jabber
	command_line	/usr/local/nagios/bin/jabber -j $CONTACTADDRESS1$ -m "$HOSTALIAS$ (ssh://$HOSTNAME$) $HOSTSTATE$ $NOTIFICATIONTYPE$ $HOSTSTATE$ $HOSTOUTPUT$"

}
define command{
	command_name	host-notify-by-sms-email
	command_line	/usr/bin/printf "%b" "$HOSTALIAS$ $NOTIFICATIONTYPE$ $HOSTSTATE$\n\n$HOSTOUTPUT$" | /bin/mail -s "$HOSTALIAS$ $HOSTSTATE$!" $CONTACTPAGER$

}

define command{
	command_name	host-notify-by-sms-gateway
	command_line	/usr/local/nagios/bin/clickatell -n $CONTACTPAGER$ -u <%= @node[:base][:clickatell_username] %> -p <%= @node[:base][:clickatell_password] %> -a <%= @node[:base][:clickatell_api_id] %> -m "$HOSTALIAS$ $HOSTSTATE$ $NOTIFICATIONTYPE$ $HOSTOUTPUT$" 

}

# 'notify-by-email' command definition
define command{
	command_name	service-notify-by-email
	command_line	/usr/bin/printf "%b" "$LONGDATETIME$ - $SERVICEDESC$ $SERVICESTATE$\n\n$HOSTALIAS$  $NOTIFICATIONTYPE$\n\n$SERVICEOUTPUT$\n\nLogin: ssh://$HOSTNAME$" | /bin/mail -s "** $NOTIFICATIONTYPE$ - $HOSTALIAS$ - $SERVICEDESC$ - $SERVICESTATE$" $CONTACTEMAIL$
	}


define command {
	command_name	service-notify-by-campfire
	command_line	/usr/local/nagios/bin/campfire -s 37s -r "<%= @node[:base][:monitoring_campfire_room] %>" -S -l <%= @node[:base][:campfire_email] %> -p <%= @node[:base][:campfire_password] %> -m "$SERVICEDESC$ $SERVICESTATE$ $HOSTALIAS$ (ssh://$HOSTNAME$) $NOTIFICATIONTYPE$ $SERVICEOUTPUT$"

}

define command {
	command_name	service-notify-by-sms-gateway
	command_line	/usr/local/nagios/bin/clickatell -n $CONTACTPAGER$ -u <%= @node[:base][:clickatell_username] %> -p <%= @node[:base][:clickatell_password] %> -a <%= @node[:base][:clickatell_api_id] %> -m "SERVICEDESC$ $SERVICESTATE$ $NOTIFICATIONTYPE$ $SERVICEOUTPUT$" 

}

define command {
	command_name	service-notify-by-jabber
	command_line	/usr/local/nagios/bin/jabber -j $CONTACTADDRESS1$ -m "$SERVICEDESC$ $SERVICESTATE$ $HOSTALIAS$ (ssh://$HOSTNAME$) $NOTIFICATIONTYPE$ $SERVICEOUTPUT$"

}